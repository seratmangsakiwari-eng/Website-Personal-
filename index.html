<!doctype html>
<html lang="su" class="scroll-smooth">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tolombong Carpon</title>
  <link rel="manifest" href="manifest.json">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100">
  <header class="sticky top-0 z-30 backdrop-blur bg-white/60 dark:bg-gray-900/60 border-b border-gray-200 dark:border-gray-800">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between gap-4">
      <a href="#/" class="flex items-center gap-3 text-lg font-semibold text-rose-600">Tolombong Carpon</a>
      <nav class="flex items-center gap-3">
        <button id="themeToggle" class="p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-800 transition"><span id="themeIcon">ğŸŒ™</span></button>
        <a href="#/" class="px-3 py-2">Tepas</a>
        <a href="#/about" class="px-3 py-2">Ngeunaan</a>
      </nav>
    </div>
  </header>
  <main class="max-w-5xl mx-auto px-4 py-8" id="app"></main>
  <footer class="max-w-5xl mx-auto px-4 py-8 text-sm text-gray-600 dark:text-gray-400">
    <div class="flex flex-col sm:flex-row justify-between items-center gap-2">
      <div>Â© <span id="year"></span> Tolombong Carpon.</div>
      <div class="text-xs"> â€¢ </div>
    </div>
  </footer>

  <!-- Reader Panel -->
  <div id="readerPanel" class="fixed inset-0 z-40 hidden items-center justify-center p-6">
    <div id="readerBackdrop" class="absolute inset-0 bg-black/50"></div>
    <article class="relative z-10 max-w-3xl w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-auto" style="max-height:90vh;">
      <header class="flex items-start justify-between p-6 border-b border-gray-100 dark:border-gray-700">
        <div>
          <h2 id="readerTitle" class="text-2xl font-semibold"></h2>
          <p id="readerMeta" class="text-sm text-gray-500 dark:text-gray-400 mt-1"></p>
        </div>
        <div class="flex items-center gap-2">
          <button id="prevBtn" class="px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700">SamÃ©mÃ©hna</button>
          <button id="nextBtn" class="px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700">Salajengna</button>
          <button id="closeReader" class="px-3 py-1 rounded-md bg-gray-100 dark:bg-gray-700">Tutup</button>
        </div>
      </header>
      <div class="p-6 prose dark:prose-invert prose-lg" id="readerContent"></div>
      <section class="p-6 border-t border-gray-200 dark:border-gray-700">
        <h3 class="text-lg font-semibold mb-3">Rating</h3>
        <div id="ratingStars" class="flex gap-1 text-2xl cursor-pointer mb-4"></div>
        <p id="ratingResult" class="text-sm text-gray-500"></p>
      </section>
      <section class="p-6 border-t border-gray-200 dark:border-gray-700">
        <h3 class="text-lg font-semibold mb-3">KomÃ©ntar</h3>
        <div id="commentList" class="space-y-3 mb-4 text-sm"></div>
        <form id="commentForm" class="flex gap-2">
          <input type="text" id="commentInput" placeholder="Tulis komÃ©ntar..." class="flex-1 border rounded-md px-3 py-2 dark:bg-gray-900" required>
          <button type="submit" class="px-3 py-2 bg-rose-500 text-white rounded-md">Kirim</button>
        </form>
      </section>
      <section class="p-6 border-t border-gray-200 dark:border-gray-700">
        <h3 class="text-lg font-semibold mb-3">Bagikeun</h3>
        <div class="flex gap-3">
          <button id="shareBtn" class="px-3 py-2 bg-blue-500 text-white rounded-md">Bagikeun</button>
        </div>
      </section>
    </article>
  </div>

  <script>
    const STORIES = [
      { id: '1', title: 'Lain Kuring', excerpt: '', date: '2025-09-25', content: `<p>Kin Ngantos Purun</p>` },
      { id: '2', title: 'meureun', excerpt: '', date: '2025-08-11', content: `<p>lain dagoaneun</p>` }
      { id: '3', title: 'Ujang Pucung', excerpt: '', date: '2025-08-11', content: `<p>Pabeubeurang, balik ti sakola, aya surat buligir gular-golÃ©r dina mÃ©ja. Henteu makÃ© kop surat. Ditujulkeunana, jelas ka kuring. Dicokot, dibuka jepitan hÃ©kterna. HorÃ©ng surat ondangan. Eusina ngondang kuring kana acara silaturahmi sakalian mÃ©nta piduâ€™ana yÃ©n manÃ©hna arÃ©k tandang makalangan dina Pemilu 2009 pikeun jadi anggota DPR RI. Disebutkeun partÃ©yna, urutanana, jeung daÃ©rah pemilihanana deuih. Di handapna, aya tanda tangan manÃ©hna jeung ngaran jelas: Ir. H. Ujang Mulyana. Anu matak kuring kapiasem, di handapeun ngaran lengkep, aya tulisan leungeun ku mangsi hideung dina jero kurung. Unina: Murid Ibu, Ujang Pucung tÃ©a.
Kagugu jeung kagagas deuih. Teu karasa, aya anu beueus dina kongkolak mata. Masih kÃ©nÃ©h inget ka kuring, geuning, masih kÃ©nÃ©h nganggap guru ka kuring tÃ©h, geuning. Padahal kuring jadi guru manÃ©hna tÃ©h basa keur di SD, sakitu puluh taun katukang. Padahal ayeuna manÃ©hna geus jadi jalma jugala. Kaasup salasahiji pengusaha suksÃ©s di Bandung. Di lembur kuring, malah bisa jadi di kabupatÃ©n kuring, moal aya nu bireuk deui ka Bapa Haji Ujang Mulyana mah. Boa sa-Jawa Barat kÃ©tang. Ngaranna jeung potrÃ©tna mindeng katÃ©mbong dina koran. Beungeutna, anu ceuk kuring mah, mÃ©h taya robahna ti jaman keur budak, pÃ©dah ditambahan kumis ipis, mindeng katÃ©mbong dina televisi, dina rupa-rupa acara jeung kagiatan.
Enya, Ujang Pucung.
(Heuheuy deudeuh, sok aya-aya baÃ© hidep mah, Pucung.)
Di lembur kuring loba anu ngaran Ujang tÃ©h. Pikeun ngabÃ©dakeunana sok dituturkeun ku ngaran kolotna. Ujang Agus, Ujang anakna Pa Agus; Ujang Karim, Ujang anakna Mang Karim; Ujang Jaya, Ujang anakna Ki Jaya; Ujang Amil, Ujang anakna Pa Amil, jeung rÃ©a-rÃ©a deui. Tapi ari manÃ©hna mah nenggang ti nu sÃ©jÃ©n: Ujang Pucung, pihartieunana Ujang anu resep nembangkeun pupuh Pucung. Kuring apal kana pihartieunana, lantaran rumasa wÃ©, kuring anu boga dosa ngalandih manÃ©hna kitu tÃ©h. Malah sakapeung mah, cukup ku nyebut Pucung baÃ©, teu makÃ© Ujang deui.
Murid Ibu, Ujang Pucung tÃ©a, cenah.
(Emh, Pucung, nuhun henteu poho ka Ibu.)
Enya, murid kuring manÃ©hna tÃ©h. Mimiti kaajar di kelas tilu SD. ManÃ©hna kaasup murid calakan. Hiji mangsa, dina pangajaran basa Sunda, kuring ngajarkeun pupuh. Ari anu diajarkan tÃ©h pupuh Pucung. Rumpakana, rumpaka anu geus populÃ©r. Ari sababna, salian ti hÃ©sÃ© nÃ©angan rumpaka sÃ©jÃ©n tÃ©h, kuringna sorangan ngan apal kana Ã©ta rumpaka. Anu unina kieu geuning:

Utamana jalma kudu rÃ©a batur,
keur silih tulungan,
silih titipkeun nya diri,
budi akal lantaran ti padajalma.

Barudak dititah ngapalkeun Ã©ta pupuh, sarta minggu hareupna kudu bisa nembangkeun sorangan-sorangan. Dina Ã©mprona, manÃ©hna pangheulana ngacung. Ka hareup, ngong tembang. Sanajan sorana henteu halimpu, tapi wirahmana mah bener. Harita ku kuring dipuji. Da enya kudu meunang pamuji tina usaha jeung kawanina. Sabab kuring nyaho, sanajan uteukna Ã©ncÃ©r, manÃ©hna teu boga anlÃ©h kana seni sora. Lain, lain teu boga bakat seni, da ari kana ngagambar jeung nyieun karajinan mah, kawilang alus.
ManÃ©hna kaajar deui ku kuring tÃ©h di kelas lima. Tah, harita kuring ngalandi manÃ©hna si Pucung tÃ©h. Lain ngÃ©wa, lain keuheul, ih teu pisan-pisan. Ngan kagugu wÃ©. Atuda unggal dititah nyanyi ka hareup, angger nembangkeun pupuh Pucung â€œUtamana jalma kudu rÃ©a baturâ€. Teu galideur ku digeuhgeuykeun, malah sakapeung sok sakalian diheureuykeun. Maenya geura, nembangkeun pupuh Pucung bari jogÃ©d kawas nyanyi dangdut! Babaturanana ager-ageran, manÃ©hna mah kalem wÃ© teu riuk-riuk.
â€œHidep mah angger taya robahna ngalagu tÃ©h, ti kelas tilu kÃ©nÃ©h, hayoh waÃ© pupuh Pucung,â€ ceuk kuring.
â€œAtuda resep Ibu,â€ tÃ©mbalna.
â€œGanti-ganti atuh rumpakana, ulah â€˜utamana jalmaâ€™ baÃ©!â€
â€œAh, teu raoseun, Ibu,â€ cenah.
â€œSi Pucung wÃ© sugan hidep mah!â€
Babaturanana saleuseurian.
Kuring gÃ© teu nyangka, omongan kuring bet jadi panglandi anu napel nepi ka kaluar sakola. Jeung deuih, manÃ©hna ogÃ© kawas anu reueus dilandi Ujang Pucung tÃ©h. Hal Ã©ta katangÃ©n waktu manÃ©hna jadi juara pasanggiri maca sajak antar-SD dina Porseni Kacamatan. Ku kuring diumumkeun di kelas. Ari pokna tÃ©h, â€œUjang Pucung tÃ©a atuh, siapa dulu dong gurunyah ....â€
â€œHuuuhhh ...,â€ ceuk barudak nu sÃ©jÃ©n.
Kuring kapiasem.
Ayeuna si Pucung, Ujang Pucung, aÃ©h Ir. H. Ujang Mulyana, jadi caleg DPR RI. Naha henteu cukup kitu ku jadi pengusaha suksÃ©s? EngkÃ© rÃ©k ditanyakeun ka manÃ©hna. Sakalian mÃ©nta dihampura, pÃ©dah kuring geus ngalandi si Pucung. Enya, dihenteu-henteu ogÃ© aya ari rasa rumasa salah mah. Atuda sugan tÃ©h moal kitu jadina ....
(Emh, Pucung, hidep kudu bÃ©ak-bÃ©ak ngahampura ka Ibu.)
Dina waktu anu geus ditangtukeun, kuring datang ka imah Mang Atang, aÃ©h Haji Atang, bapana Ir. H. Ujang Mulyana. AgrÃ©ng jeung lega ayeuna mah imahna ogÃ©.
Sup ka pakarangan imahna, horÃ©ng geus loba jelema. Ti jero imah kaluar lalaki umur 35 taunan, rurusuhan nyampeurkeun kuring. Teu samar, najan awakna jadi lingsig jeung katÃ©mbong beresih ogÃ©: si Pucung, aÃ©h ....
â€œIbu, Bapa, aduh .... mangga ka lebet. Kawitna mah ku abdi badÃ© dipiwarang dipapagkeun ka supir ....,â€ cenah, solongkrong munjungan, cium tangan.
â€œIeu tÃ©h ....?â€
â€œPucung, Ibu,â€ pokna. Enya, tadi gÃ© henteu samar. Ngan bingung, kudu kumaha nyebut ka manÃ©hna ayeuna? Geuning, teu kudu robah. Angger ngabasakeun: Pucung, Ujang Pucung.
Kuring didiukkeun ngarÃ©ndÃ©ng jeung Bi Haji Isah, indungna. Ari salaki ngarÃ©ndÃ©ng jeung Mang Haji Atang. Di tengah-tengah antarana, manÃ©hna diuk ngarÃ©ndÃ©ng jeung pamajikanana. Teu kungsi lila, der baÃ© acara dimimitian. Da cenah nu boga hadas keukeuh, acara kakara bisa dimimitian lamun kuring geus datang!
(Emh, Pucung, dianggap naon atuh Ibu ku hidep tÃ©h?)
Acara dijejeran ku Pa Agus, anu sok biasa nga-MC-an di lembur kuring. Teu loba unak-anikna, sanggeus dibuka langsung kana biantara ti sohibulbÃ©t. CapÃ©tang pertÃ©ntang nyaritakeun lalakon hirupna, direumbeuy ku heureuy seger. Suasana karasa hÃ©gar. Tapi kuring mah mindeng ngalimba salila ngadÃ©ngÃ©keun caritaanana tÃ©h. Carita ngeunaan manÃ©hna, anu sabagian gedÃ© kuring geus apal. Ngan henteu saeutik deuih anu kakara apal harita kana jero-jerona.
ManÃ©hna ngamimitian biantara ku nembang. Nembangkeun pupuh Pucung:

Utamana jalma kudu rÃ©a batur,
keur silih tulungan,
silih titipkeun nya diri,
budi akal lantaran ti padajalma.

Cenah, Ã©ta tÃ©h lagu anu munggaran ku manÃ©hna diapalkeun enya-enya. MÃ©h unggal usik. Bisa jadi mimitina mah lantaran aya â€œkawajibanâ€ kudu apal. Lagu anu manÃ©hna henteu sieun ngahaleuang, lantaran dipuji ku guru waktu munggaran ngahaleuangkeunana hareupeun batur. Saterusna, jadi lagu karesep manÃ©hna. Tungtungna, jadi â€œlagu wajibâ€ manÃ©hna. Lain baÃ© mun dititah nyanyi di kelas, tapi boh hahariringan, boh hÃ©hÃ©otan, asa kurang afdol lamun lain lagu Pucung â€œUtamana jalma kudu rÃ©a baturâ€ tÃ©h. Nepikeun ka manÃ©hna meunang panglandi Ujang Pucung. Henteu ambek, henteu Ã©ra deuih. Duka ku naon, reueus baÃ© nu aya disebut Ujang Pucung tÃ©h.
Tina karesep keur budak, bet jadi kabiasaan. Kabiasaan hahariringan atawa hÃ©hÃ©otan lagu Pucung tÃ©h manjang nepi ka ayeuna. Komo ayeuna mah, sanggeus manÃ©hna ngarasa yÃ©n pangna manÃ©hna bisa suksÃ©s tÃ©h lantaran lagu Pucung. Lain wirahmana, lain rumpakana, lain dang-ding-dungna wungkul. Tapi gumulung, sumerep-sumarambah jadi jengglÃ©ngan palasipah nu miraga-sukma. Bari manÃ©hna sorangan henteu sadar kana prosÃ©sna.
(Emh, Pucung, Ibu mah ngan saukur guru SD. Teu nyangka geuning pangajaran Ibu tÃ©h gedÃ© pangaruhna keur hidep mah.)
ManÃ©hna bisa ngarÃ©ngsÃ©keun kuliah, sasatna mah ditulungan ku babaturan sakampusna. Da ngandelkeun pangasilan kolotna di lembur mah, pimanaeun atuh. Kahirupan kolotna anu jadi buruh tani, geus lain korÃ©h-korÃ©h cok deui, tapi cok korÃ©h-korÃ©h. Ku babaturanana, manÃ©hna dipihapÃ©keun ka emangna anu boga percitakan. Ahirna manÃ©hna bisa kuliah bari digawÃ© di percitakan.
Teu kungsi sataun, antara manÃ©hna jeung dununganana, â€œsilih titipkeun nya diriâ€. ManÃ©hna nitipkeun dirina sorangan, ari dununganana nitipkeun diri anakna nu awÃ©wÃ©.
â€œNya ka anjeunna abdi nitipkeun pibudakeun tÃ©h,â€ cenah, ditungtungan ku sareuri hadirin.
RÃ©ngsÃ© kuliah, manÃ©hna neruskeun usaha mitohana. Tina percitakan dironjatkeun jadi penerbitan, husus nerbitkeun buku-buku pangajaran. Ngaran pausahaanana ogÃ© diganti jadi CV Utama, nyokot tina padalisan kahiji pupuh Pucung â€œUtamana jalma kudu rÃ©a baturâ€. Taun 90-an mÃ©mang keur meujeuhna booming bisnis buku pangajaran. Tah, harita Penerbit CV Utama mimiti ngajaulna tÃ©h, jadi salasahiji penerbit gedÃ© di Bandung. Buku-bukuna sumebar ka sakuliah IndonÃ©sia.
Usahana ngarekahan kana widang sÃ©jÃ©n, nyaÃ©ta rumah makan. Rumah makan anu munggaran diadegkeun di jajalaneun ti Bandung ka lemburna. Dingaranan Rumah Makan Situ. Cenah, â€œsituâ€ tÃ©h singgetan tina â€œsilih tulunganâ€, padalisan kadua tina rumpaka pupuh Pucung paporitna. Kiwari RM Situ geus muka cabang di sawatara tempat.
Tina rumah makan, ngagilek saeutik kana hotÃ©l. HotÃ©l anu mimiti dibeuli ku manÃ©hna tÃ©h ayana di salasahiji tempat wisata. Ngaranna diganti. Anu tadina ngagunakeun basa asing jadi HotÃ©l Titip Diri. Cenah dicokot tina padalisan katilu rumpaka pupuh Pucung kameumeutna.
â€œAri anu ngawitan ngawanohkeun pupuh Pucung ka abdi, jalmina ogÃ© ayeuna aya di dieu. Tah, Ibu Purma. Sasatna mah, nya anjeunna anu masihan dadasar palasipah hirup ka abdi tÃ©h. Hatur nuhun, Ibu,â€ pokna.
Aya nu nyelek dina tikoro, aya anu beueus dina kongkolak mata. HorÃ©ng geuning, kuring teu kudu mÃ©nta dihampura pÃ©dah geus ngalandi si Pucung ka manÃ©hna. Da geuning keur manÃ©hna mah malah jadi kakuatan anu luar biasa. Jadi dadasar palasipah hirup, cenah.
(Emh, Pucung, Pucung .... hidep geus mumbulkeun rarasaan Ibu ka awang-awang ka uwung-uwung.)
Karasa aya anu can rÃ©ngsÃ© cenah dina ngamalkeun palasipah pupuh Pucungna tÃ©h. NyaÃ©ta dina ngajanggÃ©lÃ©kkeun padalisan kaopat â€œbudi akal lantaran ti padajalmaâ€.
Bulan Juli taun tukang, manÃ©hna ditawaran jadi caleg ku salasahiji partÃ©y gedÃ©. Haratis, sarta ti mimiti nomer urut nepi ka daÃ©rah pemilihanana, bisa milih sorangan. Boa-boa ieu cenah, jalan pikeun ngawujudkeun â€œbudi akal lantaran ti padajalma tÃ©hâ€. Sanggeus dipikiran dibulak-balik, dibeuweung-diutahkeun, disawalakeun jeung kulawargana, dipadungdengkeun jeung babaturanana, Ã©ta tawaran tÃ©h ditarima. Nyokot daÃ©rah pemilihan anu ngawengku lemburna sorangan, bari susuganan manggihan jalan pikeun mulang tarima ka lemah sarakan.
Naon deui atuh? Da ceuk kuring mah geus loba anu dipigawÃ© ku manÃ©hna keur lemburna tÃ©h. Kaasup ngaronjatkeun ajÃ©n lemburna. ManÃ©hna, ka saha baÃ© ogÃ©, di mana baÃ© ogÃ©, sok ngakukeun dirina pituin urang lembur dieu. Tara ngaku urang Bandung! Ã‰ta anu jadi pamujian sarÃ©rÃ©a tÃ©h: teu poho ka purwadaksina.
â€œNu mawi ayeuna abdi neda pangrojong sareng piduâ€™ana ti sadayana. Upami janten anggota dÃ©wan tÃ©h baris seueur mangpaatna kanggo urang sadayana, mugi-mugi abdi sing kapilih. Upami langkung seueur madorotna, langkung saÃ© ulah kapilih,â€ pokna.
Najan teu dipÃ©nta, najan teu dikurihit, kuring baris ngadukung caleg anu ngamalkeun pupuh Pucung â€œUtamana jalma kudu rÃ©a baturâ€. Tong boro ukur jadi caleg, malah jadi cagub atawa caprÃ©s ogÃ©, pasti didukung. Siap jadi jurkamna deuih, teu kudu dibayar, teu kudu dibibita ku carita. Lain pÃ©dah ka murid sorangan, lain pÃ©dah ka batur salembur, lain pÃ©dah ka nu loba duit. Lain, lain pÃ©dah Ã©ta. Lain pÃ©dah aya harÃ©wosna deuih, â€œIbu sareng Bapa, henteu palay angkat jarah ka Mekah? Ieu mah teu aya hubunganana sareng pemilu â€¦.â€ Lain, sakali deui, lain pÃ©dah Ã©ta. Aya nu leuwih teleb ti Ã©ta.
(Emh, Pucung, muga-muga hidep salalawasna aya dina rido jeung panangtayungan Gusti Alloh.)
</p>` }
    ];
    const COMMENTS = {}; const RATINGS = {};
    const $ = (s,r=document)=>r.querySelector(s);
    const $$ = (s,r=document)=>Array.from(r.querySelectorAll(s));
    $('#year').textContent = new Date().getFullYear();

    // Theme
    const themeToggle=$('#themeToggle'); const themeIcon=$('#themeIcon');
    function applyTheme(t){ if(t==='dark')document.documentElement.classList.add('dark'); else document.documentElement.classList.remove('dark'); themeIcon.textContent=t==='dark'?'â˜€ï¸':'ğŸŒ™'; }
    const savedTheme=localStorage.getItem('cp_theme')||(window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light');
    applyTheme(savedTheme);
    themeToggle.addEventListener('click',()=>{const now=document.documentElement.classList.contains('dark')?'dark':'light';const next=now==='dark'?'light':'dark';applyTheme(next);localStorage.setItem('cp_theme',next);});

    const app=$('#app');
    function renderHome(){app.innerHTML=`<h1 class="text-3xl font-bold mb-4">Kumpulan Carpon</h1><section id="storyGrid" class="grid grid-cols-1 sm:grid-cols-2 gap-4"></section>`;renderStoryCards();}
    function renderStoryCards(){const grid=$('#storyGrid');grid.innerHTML=STORIES.map(s=>`<article class="bg-white dark:bg-gray-800 border rounded-lg p-4 card" data-id="${s.id}"><h3 class="font-semibold text-lg mb-1">${s.title}</h3><p class="text-sm">${s.excerpt}</p><button class="mt-2 readBtn px-3 py-1 rounded-md bg-rose-500 text-white">Baca</button></article>`).join('');$$('.card').forEach(card=>card.addEventListener('click',(e)=>{const id=card.getAttribute('data-id');if(e.target.closest('button')) location.hash=`#/story-${id}`}));}
    function renderAbout(){app.innerHTML=`<h1 class="text-3xl font-bold mb-4">Ngeunaan Panulis</h1><p>Kuring panulis carpon...</p>`;}

    const readerPanel=$('#readerPanel'); const readerTitle=$('#readerTitle'); const readerMeta=$('#readerMeta'); const readerContent=$('#readerContent'); const closeReader=$('#closeReader'); const nextBtn=$('#nextBtn'); const prevBtn=$('#prevBtn'); const commentList=$('#commentList'); const commentForm=$('#commentForm'); const commentInput=$('#commentInput'); const ratingStars=$('#ratingStars'); const ratingResult=$('#ratingResult'); const shareBtn=$('#shareBtn');
    let currentStoryIndex=-1;
    function openReaderById(id){const idx=STORIES.findIndex(s=>s.id===id);if(idx===-1)return;currentStoryIndex=idx;showStoryAtIndex(idx);readerPanel.classList.remove('hidden');document.body.style.overflow='hidden';}
    function closeReaderPanel(){readerPanel.classList.add('hidden');document.body.style.overflow='';if(location.hash.startsWith('#/story-')) location.hash='#/';}
    function showStoryAtIndex(idx){const s=STORIES[idx];readerTitle.textContent=s.title;readerMeta.textContent=s.date;readerContent.innerHTML=s.content;renderComments(s.id);renderRating(s.id);setupShare(s);history.replaceState(null,'',`#/story-${s.id}`);prevBtn.disabled=idx<=0;nextBtn.disabled=idx>=STORIES.length-1;}
    closeReader.addEventListener('click',closeReaderPanel);nextBtn.addEventListener('click',()=>{if(currentStoryIndex<STORIES.length-1){currentStoryIndex++;showStoryAtIndex(currentStoryIndex);}});prevBtn.addEventListener('click',()=>{if(currentStoryIndex>0){currentStoryIndex--;showStoryAtIndex(currentStoryIndex);}});

    function renderComments(storyId){const list=COMMENTS[storyId]||[];commentList.innerHTML=list.map(c=>`<div class="p-2 bg-gray-100 dark:bg-gray-700 rounded">${c}</div>`).join('')||'<p class="text-gray-500">Teu acan aya komÃ©ntar.</p>';commentForm.onsubmit=(e)=>{e.preventDefault();const txt=commentInput.value.trim();if(!txt)return;if(!COMMENTS[storyId])COMMENTS[storyId]=[];COMMENTS[storyId].push(txt);commentInput.value='';renderComments(storyId);};}
    function renderRating(storyId){ratingStars.innerHTML='';for(let i=1;i<=5;i++){const star=document.createElement('span');star.textContent='â˜…';star.style.cursor='pointer';star.style.color=(RATINGS[storyId]&&average(RATINGS[storyId])>=i)?'gold':'gray';star.onclick=()=>{if(!RATINGS[storyId])RATINGS[storyId]=[];RATINGS[storyId].push(i);renderRating(storyId);};ratingStars.appendChild(star);}const avg=RATINGS[storyId]?average(RATINGS[storyId]).toFixed(1):'0';ratingResult.textContent=`Rata-rata: ${avg} / 5`; }
    function average(arr){return arr.reduce((a,b)=>a+b,0)/arr.length;}
    function setupShare(story){shareBtn.onclick=()=>{const url=location.href;if(navigator.share){navigator.share({title:story.title,text:'Maca carpon ieu!',url});}else{alert('Salin URL: '+url);}};}
    function router(){const hash=location.hash||'#/' ;if(hash.startsWith('#/story-')){const id=hash.replace('#/story-','');openReaderById(id);}else if(hash==='#/about'){readerPanel.classList.add('hidden');renderAbout();}else{readerPanel.classList.add('hidden');renderHome();}}window.addEventListener('hashchange',router);window.addEventListener('load',router);
  </script>
</body>
</html>
